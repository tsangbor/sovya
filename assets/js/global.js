// Generated by CoffeeScript 1.12.7
var _auth, _loaded, _scrolled, bannerSwiper, coverSwiper, delta, examSwiper, getScrollBarWidth, init, loadingNum, md, msrc, n, nowModal, prductSwiper, productDetailSwiper, scrollPageHandle, scrollPageTo, scrolled, tight;

BrowserDetect.init();

$(function() {
  var ios, userAgent;
  userAgent = window.navigator.userAgent.toLowerCase();
  ios = /iphone|ipod|ipad/.test(userAgent);
  if (ios) {
    $('html').addClass('is-ios');
  }
  if (BrowserDetect.browser === "Explorer" || BrowserDetect.browser === "Other") {
    $("html").addClass("is-ie");
  }
});

loadingNum = null;

_loaded = false;

Pace.on("start", function() {
  loadingNum = setInterval(function() {
    var str;
    return str = $('.pace-progress').attr("data-progress-text");
  }, 100);
});

Pace.on("done", function() {
  if (_loaded === false) {
    clearInterval(loadingNum);
    _loaded = true;
    init();
  }
});

coverSwiper = null;

prductSwiper = null;

productDetailSwiper = null;

bannerSwiper = null;

examSwiper = null;

$(function() {
  var productCatalogSwiper, productDetailThumbSwiper, starProductSwiper, videoSwiper;
  if ($("#coverSwiper").length > 0) {
    coverSwiper = new Swiper("#coverSwiper", {
      speed: 777,
      simulateTouch: false,
      navigation: {
        nextEl: "#coverSwiper .swiper-next",
        prevEl: "#coverSwiper .swiper-prev"
      },
      autoHeight: true,
      pagination: {
        el: "#coverSwiper .swiper-pagination",
        clickable: true
      }
    });
    coverSwiper.on("slideChangeStart", function(e) {
      $("video").each(function() {
        $(this)[0].pause();
      });
      if ($("#coverSwiper .swiper-slide-active video").length > 0) {
        $("#coverSwiper .swiper-slide-active video")[0].play();
      }
    });
  }
  if ($("#productDetailSwiper").length > 0) {
    productDetailSwiper = new Swiper("#productDetailSwiper", {
      speed: 777,
      navigation: {
        nextEl: "#productDetailSwiper .swiper-next",
        prevEl: "#productDetailSwiper .swiper-prev"
      }
    });
    productDetailThumbSwiper = new Swiper("#productDetailThumbSwiper", {
      speed: 777,
      spaceBetween: 10,
      centeredSlides: true,
      slidesPerView: 'auto',
      slideToClickedSlide: true
    });
    productDetailSwiper.controller.control = productDetailThumbSwiper;
    productDetailThumbSwiper.controller.control = productDetailSwiper;
  }
  if ($(".video--swiper").length > 0) {
    videoSwiper = new Swiper(".video--swiper", {
      effect: "fade",
      speed: 777,
      onlyExternal: true
    });
    videoSwiper.on("slideChangeStart", function(e) {});
  }
  if ($(".exam--swiper").length > 0) {
    examSwiper = new Swiper(".exam--swiper", {
      speed: 777,
      simulateTouch: false,
      onlyExternal: true,
      nextButton: ".exam-next",
      prevButton: ".exam-prev"
    });
    $(".exam-reset").click(function(e) {
      $(".button--quiz").removeClass("active");
      examSwiper.slideTo(0);
    });
    $(".exam-check").click(function(e) {
      var slide;
      slide = $(this).parent().parent();
      if ($(slide).find(".button--quiz.active").length > 0) {
        examSwiper.slideNext();
      } else {
        alert("請作答");
      }
    });
    examSwiper.on("slideChangeStart", function(e) {});
    $(".button--quiz").click(function(e) {
      $(this).siblings().removeClass("active");
      $(this).addClass("active");
    });
  }
  if ($("#productCatalogSwiper").length > 0) {
    productCatalogSwiper = new Swiper("#productCatalogSwiper .swiper-container", {
      slidesPerView: 'auto',
      spaceBetween: 0,
      prevButton: "#productCatalogSwiper .swiper-prev",
      nextButton: "#productCatalogSwiper .swiper-next"
    });
  }
  if ($("#starProductSwiper").length > 0) {
    starProductSwiper = new Swiper("#starProductSwiper", {
      slidesPerView: "auto",
      centeredSlides: true,
      loop: true,
      virtualTranslate: true,
      prevButton: "#starProductSwiper .swiper-slide-prev",
      nextButton: "#starProductSwiper .swiper-slide-next"
    });
    $("#starProductSwiper .swiper-slide-prev").prev().addClass("swiper-slide-prevprev");
    starProductSwiper.on("slideChangeStart", function(e) {
      $("#starProductSwiper .swiper-slide").removeClass("swiper-slide-prevprev");
      if ($("#starProductSwiper .swiper-slide-prev").prev().length > 0) {
        $("#starProductSwiper .swiper-slide-prev").prev().addClass("swiper-slide-prevprev");
      } else {
        $("#starProductSwiper .swiper-slide").last().addClass("swiper-slide-prevprev");
      }
    });
    $("#starProductSwiper .swiper-slide").click(function(e) {
      var $n;
      $n = $(this).attr("js-slide");
      starProductSwiper.slideTo(parseInt($n) - 1);
    });
  }
});

$(function() {
  $(document).delegate("*[js-toggle=\"slide-to\"]", "click", function(event) {
    var str;
    str = $(this).attr("js-target");
    appSlideTo(str);
  });
  $(document).delegate("*[js-toggle=\"slide-to-next\"]", "click", function(event) {
    appSwiper.slideNext();
  });
  $(document).delegate("*[js-toggle=\"slide-to-prev\"]", "click", function(event) {
    appSwiper.slidePrev();
  });
});

tight = false;

scrolled = false;

delta = 5;

$(function() {
  var didScroll, hasScrolled, lastScrollTop, navbarHeight, scrollEvent, waypoints;
  waypoints = $('.ani').waypoint({
    offset: '50%',
    handler: function(direction) {
      $(this.element).removeClass("ani-from");
      $(this.element).addClass("ani-to");
    }
  });
  if ($(".sidebar--float").length > 0) {
    $(".sidebar--float").sticky({
      topSpacing: $(".sidebar--float").position().top,
      bottomSpacing: $("body").height() - $("#stickyEnd").position().top
    });
  }
  lastScrollTop = 0;
  didScroll = false;
  navbarHeight = $('header').outerHeight();
  $(window).scroll(function() {
    didScroll = true;
  });
  setInterval((function() {
    if (didScroll) {
      $(window).trigger("resize");
      hasScrolled();
      scrollEvent();
      return didScroll = false;
    }
  }), 250);
  hasScrolled = function() {
    var st;
    st = $(window).scrollTop();
    if (Math.abs(lastScrollTop - st) <= delta) {
      return;
    }
    if (st > lastScrollTop && st > navbarHeight) {
      $('body').removeClass('is-scrolled-up');
    } else {
      if (st <= navbarHeight) {
        $('body').removeClass('is-scrolled-up');
      } else {
        $('body').addClass('is-scrolled-up');
      }
    }
    lastScrollTop = st;
  };
  scrollEvent = function() {
    var st, sv;
    st = $(window).scrollTop();
    sv = $(window).height();
    if (st > navbarHeight) {
      $("body").addClass("is-scrolled");
    } else {
      $("body").removeClass("is-scrolled");
    }
  };
});

$(function() {
  $(document).delegate("*[js-toggle=\"scroll\"]", "click", function(event) {
    var str;
    event.preventDefault();
    str = $(this).attr("js-target");
    if (str === void 0) {
      str = $(this).attr("href");
    }
    scrollPageTo(str);
  });
});

scrollPageTo = function(str) {
  var oy, st;
  oy = $(str).offset().top - 30;
  st = $(window).scrollTop() - 20;
  if (md.mobile() === null) {
    scrollPageHandle(oy);
  } else {
    scrollPageHandle(oy);
  }
};

scrollPageHandle = function(n) {
  $('html,body').stop(true, false).animate({
    scrollTop: n,
    easing: "ease"
  }, {
    duration: 777
  });
};

getScrollBarWidth = function() {
  var $outer, widthWithScroll;
  $outer = $('<div>').css({
    visibility: 'hidden',
    width: 100,
    overflow: 'scroll'
  }).appendTo('body');
  widthWithScroll = $('<div>').css({
    width: '100%'
  }).appendTo($outer).outerWidth();
  $outer.remove();
  return 100 - widthWithScroll;
};

$(function() {
  $(document).delegate("*[js-toggle=\"drawer\"]", "click", function(e) {
    var menu;
    $(this).toggleClass("is-active");
    $("body").toggleClass("is-open-drawer");
    menu = $(this);
    $('.drawer--bg').fadeToggle("slow", "linear");
    $('.drawer--bg').click(function() {
      $("body").removeClass("is-open-drawer");
      menu.removeClass('is-active');
      $('.drawer--bg').fadeOut("slow", "linear");
    });
  });
  $(document).delegate("*[js-toggle=\"drawerPromotion\"]", "click", function(e) {
    $("body").toggleClass("is-open-drawerPromotion");
  });
});

$(function() {
  $(".nav--catalog .nav-link").next().slideUp(0);
  $(".nav--catalog .nav-link.active").next().slideDown(0);
  $(".nav--catalog .nav-link").click(function(e) {
    $(this).parent().siblings().children(".nav-link").removeClass("active");
    $(this).parent().siblings().children(".nav-link").next().slideUp();
    $(this).toggleClass("active");
    $(this).next().slideToggle();
  });
});

$(function() {
  $(".panel--submenu").fadeOut(0);
  $(document).delegate(".nav--primacy .nav-link", "mouseover", function(e) {
    if ($(this).hasClass("active") === false) {
      $(".nav--primacy .nav-link").removeClass("active");
      $(".panel--submenu").fadeOut(0);
      $(this).next().fadeIn(333);
      $(this).addClass("active");
    }
  });
  $(document).delegate(".panel--submenu", "mouseleave", function(e) {
    console.log("mouseleave");
    $(".panel--submenu").fadeOut(0);
    $(".nav--primacy .nav-link").removeClass("active");
  });
});

$(function() {
  $("video").click(function(e) {
    switch ($(this)[0].paused) {
      case true:
        $(this)[0].play();
        break;
      case false:
        $(this)[0].pause();
    }
  });
});

$(function() {
  var t;
  t = $('.spec__desc').text();
  console.log(t, t.length);
  if (t.length > 300) {
    $('.spec__desc').text(t.substr(0, 300) + '...');
  }
});

$(function() {
  $('.modal').on('show.bs.modal', function(e) {
    $("video").each(function() {
      $(this)[0].pause();
    });
    $(".modal .mov-playback video")[0].play();
  });
  $('.modal').on('hide.bs.modal', function(e) {
    $("video").each(function() {
      $(this)[0].pause();
    });
    $(".swiper-slide-active video")[0].play();
  });
});

$(function() {
  $(window).resize(function() {
    var browserWidthResize;
    browserWidthResize = $(window).width();
    $(".scroll--area").css("min-height", $(".sidebar--float").height());
  });
  $(window).trigger("resize");
});

$(function() {});

md = new MobileDetect(window.navigator.userAgent);

nowModal = "";

bannerSwiper = "";

_loaded = false;

_scrolled = false;

_auth = false;

msrc = "";

n = 0;

$.fn.extend({
  animateCss: function(animationName) {
    var animationEnd;
    animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';
    $(this).addClass('animated ' + animationName).one(animationEnd, function() {
      $(this).removeClass('animated ' + animationName);
    });
  }
});

$(function() {
  var root;
  root = typeof exports === "function" ? exports(this) : void 0;
  $(".invisible").fadeOut(0);
  $(".invisible").removeClass("invisible");
  $(window).trigger("scroll");
  $(window).trigger("resize");
});

init = function() {
  var $mq;
  $mq = window.matchMedia("(max-width: 62em)");
};

$(function() {
  $(document).delegate("button[href]", "click", function(e) {
    var str;
    e.preventDefault();
    str = $(this).attr("href");
    window.location = str;
  });
  $(document).delegate("*[js-trigger]", "click", function(event) {
    var fn;
    fn = $(this).attr("js-trigger");
    eval(fn)();
  });
});

$(function() {
  $('.row--news').imagesLoaded(function() {
    setTimeout(function() {
      return $('.row--news').masonry({
        itemSelector: '.row--news .col'
      });
    }, 1111);
  });
});


//# sourceMappingURL=global.js.map
